{"uid":"669bb843666b6e7b","name":"Validate Council Output -- @1.16 Testing : ManchesterCityCouncil","fullName":"Test each council output matches expected results in /outputs: Validate Council Output","historyId":"c94d2c7ed88e4f22fbfd11df6ffb77c1","time":{"start":1673487754199,"stop":1673487754203,"duration":4},"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/ManchesterCityCouncil.py\", line 6, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/ManchesterCityCouncil.py\", line 6, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","steps":[{"name":"Given the council: \"ManchesterCityCouncil\"","time":{"start":1673487754200,"stop":1673487754200,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"When we scrape the data from \"ManchesterCityCouncil\"","time":{"start":1673487754200,"stop":1673487754203,"duration":3},"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/ManchesterCityCouncil.py\", line 6, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},{"name":"Then the result is valid json","time":{"start":1673487754203,"stop":1673487754203,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1673487754203,"stop":1673487754203,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"ManchesterCityCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":22,"unknown":0,"total":24},"items":[{"uid":"8369276a0faf48dc","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/374//#testresult/8369276a0faf48dc","status":"broken","statusDetails":"TypeError: 'type' object is not subscriptable\n","time":{"start":1673468607861,"stop":1673468607865,"duration":4}},{"uid":"3813c5c379f9ab89","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/370//#testresult/3813c5c379f9ab89","status":"passed","time":{"start":1673401570195,"stop":1673401573743,"duration":3548}},{"uid":"ed19c1f5c763fc4b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/368//#testresult/ed19c1f5c763fc4b","status":"passed","time":{"start":1673295846921,"stop":1673295850553,"duration":3632}},{"uid":"a5b86d90efd81e13","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/366//#testresult/a5b86d90efd81e13","status":"passed","time":{"start":1673142621564,"stop":1673142625520,"duration":3956}},{"uid":"9ffd144136b92174","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/363//#testresult/9ffd144136b92174","status":"passed","time":{"start":1673055755165,"stop":1673055759555,"duration":4390}},{"uid":"d5c85c50d20b8805","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/362//#testresult/d5c85c50d20b8805","status":"passed","time":{"start":1673030712784,"stop":1673030717924,"duration":5140}},{"uid":"55725ae1c8d0b496","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/360//#testresult/55725ae1c8d0b496","status":"passed","time":{"start":1672969526097,"stop":1672969528865,"duration":2768}},{"uid":"1af6df5adfc287f7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/359//#testresult/1af6df5adfc287f7","status":"passed","time":{"start":1672883104991,"stop":1672883110260,"duration":5269}},{"uid":"34c09510b775d126","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/357//#testresult/34c09510b775d126","status":"passed","time":{"start":1672734482987,"stop":1672734486049,"duration":3062}},{"uid":"cb3202a3df228adb","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/356//#testresult/cb3202a3df228adb","status":"passed","time":{"start":1672709982397,"stop":1672709989218,"duration":6821}},{"uid":"3eb5990dc9be5b92","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/355//#testresult/3eb5990dc9be5b92","status":"passed","time":{"start":1672623662465,"stop":1672623666802,"duration":4337}},{"uid":"187728ce42cda190","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/353//#testresult/187728ce42cda190","status":"passed","time":{"start":1672538247484,"stop":1672538254659,"duration":7175}},{"uid":"13995e244cc53923","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/352//#testresult/13995e244cc53923","status":"passed","time":{"start":1672450712056,"stop":1672450716342,"duration":4286}},{"uid":"d379abe7e8b0ffd6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/351//#testresult/d379abe7e8b0ffd6","status":"passed","time":{"start":1672364534897,"stop":1672364538598,"duration":3701}},{"uid":"ecee85b18dab87af","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/350//#testresult/ecee85b18dab87af","status":"passed","time":{"start":1672278093365,"stop":1672278100398,"duration":7033}},{"uid":"4409deb1df8aac75","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/349//#testresult/4409deb1df8aac75","status":"passed","time":{"start":1672191680778,"stop":1672191684678,"duration":3900}},{"uid":"f94c54bd031178e4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/348//#testresult/f94c54bd031178e4","status":"passed","time":{"start":1672105188478,"stop":1672105193111,"duration":4633}},{"uid":"e62e4ef0d436e404","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/347//#testresult/e62e4ef0d436e404","status":"passed","time":{"start":1672018795670,"stop":1672018799651,"duration":3981}},{"uid":"b5d1d6d85c596a92","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/345//#testresult/b5d1d6d85c596a92","status":"passed","time":{"start":1671845266817,"stop":1671845270817,"duration":4000}},{"uid":"ec0e5ae1de93a0f4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/344//#testresult/ec0e5ae1de93a0f4","status":"passed","time":{"start":1671759652335,"stop":1671759662537,"duration":10202}}]},"tags":[]},"source":"669bb843666b6e7b.json","parameterValues":["ManchesterCityCouncil"]}