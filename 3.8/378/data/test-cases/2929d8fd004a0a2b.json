{"uid":"2929d8fd004a0a2b","name":"Validate Council Output -- @1.13 Testing : FenlandDistrictCouncil","fullName":"Test each council output matches expected results in /outputs: Validate Council Output","historyId":"00dcf8ad98a583237cc30d5af0d22f2a","time":{"start":1673487754185,"stop":1673487754189,"duration":4},"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/FenlandDistrictCouncil.py\", line 5, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/FenlandDistrictCouncil.py\", line 5, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","steps":[{"name":"Given the council: \"FenlandDistrictCouncil\"","time":{"start":1673487754186,"stop":1673487754186,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"When we scrape the data from \"FenlandDistrictCouncil\"","time":{"start":1673487754186,"stop":1673487754189,"duration":3},"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/FenlandDistrictCouncil.py\", line 5, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},{"name":"Then the result is valid json","time":{"start":1673487754189,"stop":1673487754189,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1673487754189,"stop":1673487754189,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"FenlandDistrictCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":22,"unknown":0,"total":24},"items":[{"uid":"44e4bfa9ae9a1f67","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/374//#testresult/44e4bfa9ae9a1f67","status":"broken","statusDetails":"TypeError: 'type' object is not subscriptable\n","time":{"start":1673468607848,"stop":1673468607852,"duration":4}},{"uid":"d9ebe848737582e4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/370//#testresult/d9ebe848737582e4","status":"passed","time":{"start":1673401443052,"stop":1673401448300,"duration":5248}},{"uid":"fa9214c6fa345bc","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/368//#testresult/fa9214c6fa345bc","status":"passed","time":{"start":1673295713441,"stop":1673295720141,"duration":6700}},{"uid":"ef00841c90c6e46e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/366//#testresult/ef00841c90c6e46e","status":"passed","time":{"start":1673142404761,"stop":1673142410520,"duration":5759}},{"uid":"c3e3c2fa3a5e18f7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/363//#testresult/c3e3c2fa3a5e18f7","status":"passed","time":{"start":1673055557752,"stop":1673055567249,"duration":9497}},{"uid":"26e1b8ce58a204be","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/362//#testresult/26e1b8ce58a204be","status":"passed","time":{"start":1673030514704,"stop":1673030520514,"duration":5810}},{"uid":"f1c40203ea980ee5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/360//#testresult/f1c40203ea980ee5","status":"passed","time":{"start":1672969388837,"stop":1672969398080,"duration":9243}},{"uid":"9af23c5ea4512168","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/359//#testresult/9af23c5ea4512168","status":"passed","time":{"start":1672882981656,"stop":1672882987571,"duration":5915}},{"uid":"841e63d7d9daa916","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/357//#testresult/841e63d7d9daa916","status":"passed","time":{"start":1672734353651,"stop":1672734359713,"duration":6062}},{"uid":"44e9817e25276de2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/356//#testresult/44e9817e25276de2","status":"passed","time":{"start":1672709850781,"stop":1672709857320,"duration":6539}},{"uid":"3fd24d00162bdb22","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/355//#testresult/3fd24d00162bdb22","status":"passed","time":{"start":1672623488622,"stop":1672623494213,"duration":5591}},{"uid":"b19787e361ec056","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/353//#testresult/b19787e361ec056","status":"passed","time":{"start":1672538027915,"stop":1672538036365,"duration":8450}},{"uid":"c0a6059da0a36ba0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/352//#testresult/c0a6059da0a36ba0","status":"passed","time":{"start":1672450578390,"stop":1672450586264,"duration":7874}},{"uid":"585199cbf1d32373","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/351//#testresult/585199cbf1d32373","status":"passed","time":{"start":1672364412836,"stop":1672364417535,"duration":4699}},{"uid":"e685808a61fd0ea5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/350//#testresult/e685808a61fd0ea5","status":"passed","time":{"start":1672277967624,"stop":1672277972719,"duration":5095}},{"uid":"1a029f49a8f67d39","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/349//#testresult/1a029f49a8f67d39","status":"passed","time":{"start":1672191457141,"stop":1672191462861,"duration":5720}},{"uid":"e78284f8435c6957","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/348//#testresult/e78284f8435c6957","status":"passed","time":{"start":1672105020627,"stop":1672105029736,"duration":9109}},{"uid":"8735115821d3e6a3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/347//#testresult/8735115821d3e6a3","status":"passed","time":{"start":1672018672336,"stop":1672018677350,"duration":5014}},{"uid":"55254098c64403cc","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/345//#testresult/55254098c64403cc","status":"passed","time":{"start":1671845143106,"stop":1671845150874,"duration":7768}},{"uid":"1f7c2d1987638d0b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/344//#testresult/1f7c2d1987638d0b","status":"passed","time":{"start":1671759449388,"stop":1671759460401,"duration":11013}}]},"tags":[]},"source":"2929d8fd004a0a2b.json","parameterValues":["FenlandDistrictCouncil"]}