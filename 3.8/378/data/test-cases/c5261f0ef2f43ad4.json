{"uid":"c5261f0ef2f43ad4","name":"Validate Council Output -- @1.2 Testing : BexleyCouncil","fullName":"Test each council output matches expected results in /outputs: Validate Council Output","historyId":"5c6a2cf89a66f81796c92e201de82922","time":{"start":1673487752369,"stop":1673487752373,"duration":4},"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/BexleyCouncil.py\", line 5, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/BexleyCouncil.py\", line 5, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","steps":[{"name":"Given the council: \"BexleyCouncil\"","time":{"start":1673487752369,"stop":1673487752370,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"When we scrape the data from \"BexleyCouncil\"","time":{"start":1673487752370,"stop":1673487752373,"duration":3},"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/BexleyCouncil.py\", line 5, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},{"name":"Then the result is valid json","time":{"start":1673487752373,"stop":1673487752373,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1673487752373,"stop":1673487752373,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"BexleyCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":25,"skipped":0,"passed":0,"unknown":0,"total":25},"items":[{"uid":"6956b30d04782528","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/374//#testresult/6956b30d04782528","status":"broken","statusDetails":"TypeError: 'type' object is not subscriptable\n","time":{"start":1673468606069,"stop":1673468606074,"duration":5}},{"uid":"9720ae9d73842ee7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/370//#testresult/9720ae9d73842ee7","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1673401415545,"stop":1673401416643,"duration":1098}},{"uid":"1e1fafddfbf1c25f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/369//#testresult/1e1fafddfbf1c25f","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1673315058468,"stop":1673315059672,"duration":1204}},{"uid":"6b39b18679a1bce2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/368//#testresult/6b39b18679a1bce2","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1673295690933,"stop":1673295693511,"duration":2578}},{"uid":"8a3e4230e8aa1eea","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/366//#testresult/8a3e4230e8aa1eea","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1673142379208,"stop":1673142380809,"duration":1601}},{"uid":"31dede75dbb67c3a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/363//#testresult/31dede75dbb67c3a","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1673055532531,"stop":1673055533977,"duration":1446}},{"uid":"98727a73c36af40d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/362//#testresult/98727a73c36af40d","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1673030487524,"stop":1673030489684,"duration":2160}},{"uid":"f25aa490c535bbc7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/360//#testresult/f25aa490c535bbc7","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672969363300,"stop":1672969364759,"duration":1459}},{"uid":"d09da048368ac22f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/359//#testresult/d09da048368ac22f","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672882959297,"stop":1672882961129,"duration":1832}},{"uid":"e719569e81d4ea43","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/357//#testresult/e719569e81d4ea43","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672734329916,"stop":1672734331156,"duration":1240}},{"uid":"ddc458cb3334a642","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/356//#testresult/ddc458cb3334a642","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672709827860,"stop":1672709829057,"duration":1197}},{"uid":"937053ddcc0c90b8","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/355//#testresult/937053ddcc0c90b8","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672623464109,"stop":1672623465689,"duration":1580}},{"uid":"5842099d365f35eb","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/353//#testresult/5842099d365f35eb","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672537999740,"stop":1672538001411,"duration":1671}},{"uid":"1c98cca52fe789cd","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/352//#testresult/1c98cca52fe789cd","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672450551911,"stop":1672450553601,"duration":1690}},{"uid":"5bff5acd8657d29","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/351//#testresult/5bff5acd8657d29","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672364392066,"stop":1672364393157,"duration":1091}},{"uid":"271c60d12fc4887d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/350//#testresult/271c60d12fc4887d","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672277946757,"stop":1672277947829,"duration":1072}},{"uid":"b002197d4b64536c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/349//#testresult/b002197d4b64536c","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672191427815,"stop":1672191429794,"duration":1979}},{"uid":"db196e4e8b4b4550","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/348//#testresult/db196e4e8b4b4550","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672104995273,"stop":1672104997313,"duration":2040}},{"uid":"30bdd41c567d5e2a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/347//#testresult/30bdd41c567d5e2a","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1672018650579,"stop":1672018651684,"duration":1105}},{"uid":"6add3dcf4660f6d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/345//#testresult/6add3dcf4660f6d","status":"broken","statusDetails":"ValueError: Error parsing API. Please check your email is correct and registered on the @Home app.\n","time":{"start":1671845112128,"stop":1671845113564,"duration":1436}}]},"tags":[]},"source":"c5261f0ef2f43ad4.json","parameterValues":["BexleyCouncil"]}