{"uid":"37897c83dbe750e8","name":"Validate Council Output -- @1.23 Testing : SouthOxfordshireCouncil","fullName":"Test each council output matches expected results in /outputs: Validate Council Output","historyId":"c5bd508b4efccbfafc8817aed70e441a","time":{"start":1673487754224,"stop":1673487754229,"duration":5},"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthOxfordshireCouncil.py\", line 4, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthOxfordshireCouncil.py\", line 4, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","steps":[{"name":"Given the council: \"SouthOxfordshireCouncil\"","time":{"start":1673487754225,"stop":1673487754225,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"When we scrape the data from \"SouthOxfordshireCouncil\"","time":{"start":1673487754225,"stop":1673487754228,"duration":3},"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthOxfordshireCouncil.py\", line 4, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},{"name":"Then the result is valid json","time":{"start":1673487754229,"stop":1673487754229,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1673487754229,"stop":1673487754229,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"SouthOxfordshireCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":22,"unknown":0,"total":24},"items":[{"uid":"29a9cfe9a2333e09","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/374//#testresult/29a9cfe9a2333e09","status":"broken","statusDetails":"TypeError: 'type' object is not subscriptable\n","time":{"start":1673468607885,"stop":1673468607890,"duration":5}},{"uid":"f29ee9f679d5f846","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/370//#testresult/f29ee9f679d5f846","status":"passed","time":{"start":1673401577147,"stop":1673401582120,"duration":4973}},{"uid":"66220f94175bfd3c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/368//#testresult/66220f94175bfd3c","status":"passed","time":{"start":1673295854226,"stop":1673295906465,"duration":52239}},{"uid":"1c9065112616c2ce","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/366//#testresult/1c9065112616c2ce","status":"passed","time":{"start":1673142630047,"stop":1673142637403,"duration":7356}},{"uid":"749a8a442a3cfcb4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/363//#testresult/749a8a442a3cfcb4","status":"passed","time":{"start":1673055764708,"stop":1673055770652,"duration":5944}},{"uid":"a67f3335b89b9ad9","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/362//#testresult/a67f3335b89b9ad9","status":"passed","time":{"start":1673030722853,"stop":1673030728466,"duration":5613}},{"uid":"3b7b54ba5678bb77","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/360//#testresult/3b7b54ba5678bb77","status":"passed","time":{"start":1672969531969,"stop":1672969536846,"duration":4877}},{"uid":"b031259b82394dc2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/359//#testresult/b031259b82394dc2","status":"passed","time":{"start":1672883113953,"stop":1672883149612,"duration":35659}},{"uid":"6ee46ad6bdb93fb5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/357//#testresult/6ee46ad6bdb93fb5","status":"passed","time":{"start":1672734489112,"stop":1672734534598,"duration":45486}},{"uid":"a7709acf50d47e46","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/356//#testresult/a7709acf50d47e46","status":"passed","time":{"start":1672709993055,"stop":1672709998000,"duration":4945}},{"uid":"13b59bc5b1b7cdec","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/355//#testresult/13b59bc5b1b7cdec","status":"passed","time":{"start":1672623671073,"stop":1672623676559,"duration":5486}},{"uid":"29bd2b14a64ea8be","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/353//#testresult/29bd2b14a64ea8be","status":"passed","time":{"start":1672538259780,"stop":1672538266622,"duration":6842}},{"uid":"332e24a5289fc185","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/352//#testresult/332e24a5289fc185","status":"passed","time":{"start":1672450721357,"stop":1672450726656,"duration":5299}},{"uid":"4a962112a1132a90","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/351//#testresult/4a962112a1132a90","status":"passed","time":{"start":1672364542293,"stop":1672364550536,"duration":8243}},{"uid":"731f63d377ab7458","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/350//#testresult/731f63d377ab7458","status":"passed","time":{"start":1672278104340,"stop":1672278109144,"duration":4804}},{"uid":"6a377b063cb83de2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/349//#testresult/6a377b063cb83de2","status":"passed","time":{"start":1672191689945,"stop":1672191696894,"duration":6949}},{"uid":"c20521e11d12b408","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/348//#testresult/c20521e11d12b408","status":"passed","time":{"start":1672105197329,"stop":1672105202888,"duration":5559}},{"uid":"b70cb7f7cf31fea3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/347//#testresult/b70cb7f7cf31fea3","status":"passed","time":{"start":1672018803552,"stop":1672018808714,"duration":5162}},{"uid":"169ed43f4c3a7fa3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/345//#testresult/169ed43f4c3a7fa3","status":"passed","time":{"start":1671845274440,"stop":1671845280053,"duration":5613}},{"uid":"d857506839a358f4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/344//#testresult/d857506839a358f4","status":"passed","time":{"start":1671759672065,"stop":1671759678098,"duration":6033}}]},"tags":[]},"source":"37897c83dbe750e8.json","parameterValues":["SouthOxfordshireCouncil"]}