{"uid":"7e9e0cf176b63a0f","name":"Validate Council Output -- @1.36 Testing : SouthTynesideCouncil","fullName":"Test each council output matches expected results in /outputs: Validate Council Output","historyId":"41cb9839d62ef65896944bd00dc6aeca","time":{"start":1676925417526,"stop":1676925419950,"duration":2424},"status":"broken","statusMessage":"KeyError: 'result'\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 34, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 63, in main\n    return client_code(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 23, in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/get_bin_data.py\", line 55, in template_method\n    bin_data_dict = self.parse_data(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 75, in parse_data\n    uprn = get_address_uprn(user_postcode, user_paon, api_url)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 31, in get_address_uprn\n    results = json_response[\"result\"]\n","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"KeyError: 'result'\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 34, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 63, in main\n    return client_code(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 23, in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/get_bin_data.py\", line 55, in template_method\n    bin_data_dict = self.parse_data(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 75, in parse_data\n    uprn = get_address_uprn(user_postcode, user_paon, api_url)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 31, in get_address_uprn\n    results = json_response[\"result\"]\n","steps":[{"name":"Given the council: \"SouthTynesideCouncil\"","time":{"start":1676925417526,"stop":1676925417527,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"When we scrape the data from \"SouthTynesideCouncil\"","time":{"start":1676925417527,"stop":1676925419950,"duration":2423},"status":"broken","statusMessage":"KeyError: 'result'\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 34, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 63, in main\n    return client_code(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 23, in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/get_bin_data.py\", line 55, in template_method\n    bin_data_dict = self.parse_data(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 75, in parse_data\n    uprn = get_address_uprn(user_postcode, user_paon, api_url)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 31, in get_address_uprn\n    results = json_response[\"result\"]\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},{"name":"Then the result is valid json","time":{"start":1676925419950,"stop":1676925419950,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1676925419950,"stop":1676925419950,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"SouthTynesideCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":11,"skipped":0,"passed":0,"unknown":0,"total":11},"items":[{"uid":"e8d064fe360921e6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/473//#testresult/e8d064fe360921e6","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1676920179815,"stop":1676920182533,"duration":2718}},{"uid":"506626f6d08c2b6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/472//#testresult/506626f6d08c2b6","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1676920038645,"stop":1676920040373,"duration":1728}},{"uid":"df80ccb3a23fdfb3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/471//#testresult/df80ccb3a23fdfb3","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1676918578179,"stop":1676918581045,"duration":2866}},{"uid":"21b6faf6346b16d7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/469//#testresult/21b6faf6346b16d7","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1676917399976,"stop":1676917402015,"duration":2039}},{"uid":"2ee8143926f8e23e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/468//#testresult/2ee8143926f8e23e","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1676889798296,"stop":1676889800513,"duration":2217}},{"uid":"501762d91d75d496","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/466//#testresult/501762d91d75d496","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1676882124823,"stop":1676882127120,"duration":2297}},{"uid":"914aff59c4c053de","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/465//#testresult/914aff59c4c053de","status":"broken","statusDetails":"TypeError: 'builtin_function_or_method' object is not subscriptable\n","time":{"start":1676880773798,"stop":1676880773800,"duration":2}},{"uid":"245b54a3a2023763","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/464//#testresult/245b54a3a2023763","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1676879254753,"stop":1676879256523,"duration":1770}},{"uid":"76b606d968af32f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/463//#testresult/76b606d968af32f","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1676877976902,"stop":1676877979150,"duration":2248}},{"uid":"b8c56f6d26b9ff03","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/462//#testresult/b8c56f6d26b9ff03","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1676874689299,"stop":1676874691825,"duration":2526}}]},"tags":[]},"source":"7e9e0cf176b63a0f.json","parameterValues":["SouthTynesideCouncil"]}