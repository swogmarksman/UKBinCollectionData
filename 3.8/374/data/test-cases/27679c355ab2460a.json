{"uid":"27679c355ab2460a","name":"Validate Council Output -- @1.33 Testing : WindsorAndMaidenheadCouncil","fullName":"Test each council output matches expected results in /outputs: Validate Council Output","historyId":"e39f64a1db5ff0545fb68c7ffb4ff07f","time":{"start":1673468609635,"stop":1673468609640,"duration":5},"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/WindsorAndMaidenheadCouncil.py\", line 4, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/WindsorAndMaidenheadCouncil.py\", line 4, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","steps":[{"name":"Given the council: \"WindsorAndMaidenheadCouncil\"","time":{"start":1673468609636,"stop":1673468609636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"When we scrape the data from \"WindsorAndMaidenheadCouncil\"","time":{"start":1673468609636,"stop":1673468609639,"duration":3},"status":"broken","statusMessage":"TypeError: 'type' object is not subscriptable\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 52, in main\n    council_module = get_council_module(council_module_str)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 27, in get_council_module\n    return importlib.import_module(council_module_str)\n  File \"/opt/hostedtoolcache/Python/3.8.15/x64/lib/python3.8/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/WindsorAndMaidenheadCouncil.py\", line 4, in <module>\n    from uk_bin_collection.uk_bin_collection.common import *\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/common.py\", line 131, in <module>\n    def dates_in_period(start: datetime, day_of_week: int, amount=8) -> list[datetime]:\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},{"name":"Then the result is valid json","time":{"start":1673468609640,"stop":1673468609640,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1673468609640,"stop":1673468609640,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"WindsorAndMaidenheadCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":22,"unknown":0,"total":23},"items":[{"uid":"7fadb0ad7f73a7e6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/370//#testresult/7fadb0ad7f73a7e6","status":"passed","time":{"start":1673401597118,"stop":1673401600456,"duration":3338}},{"uid":"b5a3207f07f880bd","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/368//#testresult/b5a3207f07f880bd","status":"passed","time":{"start":1673295921660,"stop":1673295925373,"duration":3713}},{"uid":"7992800caf5d3264","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/366//#testresult/7992800caf5d3264","status":"passed","time":{"start":1673142656217,"stop":1673142659919,"duration":3702}},{"uid":"31acd335a6948fa","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/363//#testresult/31acd335a6948fa","status":"passed","time":{"start":1673055789058,"stop":1673055793585,"duration":4527}},{"uid":"245daaee24f60476","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/362//#testresult/245daaee24f60476","status":"passed","time":{"start":1673030746401,"stop":1673030750018,"duration":3617}},{"uid":"8aa486f5322deaa0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/360//#testresult/8aa486f5322deaa0","status":"passed","time":{"start":1672969554363,"stop":1672969558348,"duration":3985}},{"uid":"d6a838822a6f5480","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/359//#testresult/d6a838822a6f5480","status":"passed","time":{"start":1672883169697,"stop":1672883173320,"duration":3623}},{"uid":"2480ea7c6b5f0240","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/357//#testresult/2480ea7c6b5f0240","status":"passed","time":{"start":1672734548902,"stop":1672734552441,"duration":3539}},{"uid":"e19f881b77704c7f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/356//#testresult/e19f881b77704c7f","status":"passed","time":{"start":1672710170315,"stop":1672710174105,"duration":3790}},{"uid":"97b0334f708c5f9b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/355//#testresult/97b0334f708c5f9b","status":"passed","time":{"start":1672623696553,"stop":1672623700082,"duration":3529}},{"uid":"1e50ace057040431","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/353//#testresult/1e50ace057040431","status":"passed","time":{"start":1672538288920,"stop":1672538298300,"duration":9380}},{"uid":"275bff2cf30f510b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/352//#testresult/275bff2cf30f510b","status":"passed","time":{"start":1672450907957,"stop":1672450911991,"duration":4034}},{"uid":"a45f75e2aa4cbb88","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/351//#testresult/a45f75e2aa4cbb88","status":"passed","time":{"start":1672364758545,"stop":1672364762283,"duration":3738}},{"uid":"546b7b5907900a7c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/350//#testresult/546b7b5907900a7c","status":"passed","time":{"start":1672278309710,"stop":1672278313467,"duration":3757}},{"uid":"2495f04f5d9a6f5d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/349//#testresult/2495f04f5d9a6f5d","status":"passed","time":{"start":1672191797329,"stop":1672191801352,"duration":4023}},{"uid":"6bdbe9bfdae56352","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/348//#testresult/6bdbe9bfdae56352","status":"passed","time":{"start":1672105355354,"stop":1672105359071,"duration":3717}},{"uid":"ce4db24d1ab3c6f9","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/347//#testresult/ce4db24d1ab3c6f9","status":"passed","time":{"start":1672018825603,"stop":1672018829413,"duration":3810}},{"uid":"f8060fc1e4589a20","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/345//#testresult/f8060fc1e4589a20","status":"passed","time":{"start":1671845302557,"stop":1671845306130,"duration":3573}},{"uid":"14542a813e1f9841","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/344//#testresult/14542a813e1f9841","status":"passed","time":{"start":1671759707783,"stop":1671759711758,"duration":3975}},{"uid":"b2d51fceab92e959","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/343//#testresult/b2d51fceab92e959","status":"passed","time":{"start":1671705170472,"stop":1671705173887,"duration":3415}}]},"tags":[]},"source":"27679c355ab2460a.json","parameterValues":["WindsorAndMaidenheadCouncil"]}